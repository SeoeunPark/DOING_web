<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="Info" content="width=device-width, initial-scale=1.0">
    <title>Doing_Info</title>
    <script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-database.js"></script>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <style>
        body,
        h1 {
            font-family: "Raleway", Arial, sans-serif
        }

        h1 {
            letter-spacing: 6px
        }

        .w3-row-padding img {
            margin-bottom: 12px
        }
    </style>

    <script>
        function getParameter(parameterName) {
            let parameters = new URLSearchParams(window.location.search);
            return parameters.get(parameterName);
        }
        var firebaseConfig = {
            apiKey: "AIzaSyDG-SGv3SxwJ4Rmt__KcBLqraYBeCpr39g",
            authDomain: "doing-651bf.firebaseapp.com",
            databaseURL: "https://doing-651bf-default-rtdb.firebaseio.com",
            projectId: "doing-651bf",
            storageBucket: "doing-651bf.appspot.com",
            messagingSenderId: "489449155904",
            appId: "1:489449155904:web:9c4117a3e3a64246de9ea5",
            measurementId: "G-5ZWNKSF2M2"
        };

        firebase.initializeApp(firebaseConfig);

        function userFunc() {
            var userinfo_get = new Array(0);
            var firebaseRef = firebase.database().ref("users/" + getParameter("id"));
            firebaseRef.get().then((snapshot) => {
                if (snapshot.exists()) {
                    snapshot.forEach((childSnapshot) => {
                        document.querySelector('#root').innerHTML +=
                            `<div>${childSnapshot.key + " : " + childSnapshot.val()}</div>`
                        userinfo_get.push(childSnapshot.val());
                    });
                } else {

                }
                console.log(userinfo_get);

                var about = userinfo_get[0];
                var condition = userinfo_get[1];
                var ing = userinfo_get[2];
                var level = userinfo_get[3];
                var name = userinfo_get[4];
                // document.getElementById("condition").innerHTML = userinfo_get[1];
                
                // document.getElementById("level").innerHTML = userinfo_get[3];
                if(name){
                    document.getElementById("name").innerHTML = name+'님은';
                }
                if (level == 1) {
                    document.getElementById("root").innerHTML = '지금은 여유로워요';
                } else if (level == 2) {
                    document.getElementById("root").innerHTML = '지금은 바빠요';
                } else if(level == 3){
                    document.getElementById("root").innerHTML = '지금은 매우 바빠요';
                }
                if(ing){
                    document.getElementById("ing").innerHTML = '현재 '+ing+'중이에요';
                }
                if(about){
                    document.getElementById("about").innerHTML = about;
                }
            });
        }
        userFunc();
    </script>

    <div class="w3-content" style="max-width:1500px">
        
        <!-- Header -->
        <header class="w3-panel w3-center w3-opacity" style="padding:128px 16px">
            <h1 class="w3-xlarge"><div id = "root"></div></h1><br>
            <h1><div id = "name"></div></h1>
            <h1><div id = "ing"></div></h1>
            <h3><div id = "about"></div></h3>
            </body>

</html>