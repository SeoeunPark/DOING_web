<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name= "Info" content="width=device-width, initial-scale=1.0">
        <title>Doing_Info</title>
        <script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-database.js"></script>
        <script>
            function getParameter( parameterName){
                let parameters = new URLSearchParams( window.location.search);
                return parameters.get( parameterName);
            }
        </script>
        <script>
            var userinfo
            var firebaseConfig = {
                apiKey: "AIzaSyDG-SGv3SxwJ4Rmt__KcBLqraYBeCpr39g",
                authDomain: "doing-651bf.firebaseapp.com",
                databaseURL: "https://doing-651bf-default-rtdb.firebaseio.com",
                projectId: "doing-651bf",
                storageBucket: "doing-651bf.appspot.com",
                messagingSenderId: "489449155904",
                appId: "1:489449155904:web:9c4117a3e3a64246de9ea5",
                measurementId: "G-5ZWNKSF2M2"
            };

            firebase.initializeApp(firebaseConfig);

            function userFunc(){
                var userkey=[0];
                var firebaseRef = firebase.database().ref("users/"+getParameter("id"));
                firebaseRef.get().then((snapshot) => {
                    if (snapshot.exists()) {
                        snapshot.forEach((childSnapshot) => {
                            // document.querySelector('#root').innerHTML +=
                            // `<div>${childSnapshot.key+" : "+childSnapshot.val()}</div>`
                            userkey.push(childSnapshot.val());
                        });
                        console.log(snapshot.val());
                    } else {
                        document.querySelector('#root').innerHTML =`
                            <div>${"없는 사용자입니다!"}</div>
                            `
                    }
                    document.write(userkey);
                });
                return userkey;
            }
            userinfo = userFunc();
            console.log(userinfo);
        </script>
    </head>
    <body>
        <div id = "root"></div>        
    </body>
</html>